(this["webpackJsonpscrollyteller-react"]=this["webpackJsonpscrollyteller-react"]||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/facilities.b841217a.csv"},32:function(e,t,a){e.exports=a(41)},37:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a(4),l=a(11),o=a(9),s=a(12),c=a(0),r=a.n(c),p=a(10),u=a.n(p),h=(a(37),a(26)),d=function(e){function t(){var e,a;Object(n.a)(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={visible:!0,threshold:1,id:a.props.id,data:[]},a.headerHandleChange=function(e){e.isIntersecting&&a.props.id!==a.props.activeID&&a.props.app.setActiveID(a.props.id),a.setState({visible:a.props.id===a.props.activeID})},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.divElement.clientHeight>400&&this.setState({threshold:[400/this.divElement.clientHeight,1]})}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,{onChange:this.headerHandleChange,threshold:this.state.threshold},r.a.createElement("section",{id:this.props.title,className:"storyPanelSection ".concat(this.state.visible&&this.state.id===this.props.activeID?"activePanel":"inactivePanel"),ref:function(t){e.divElement=t}},r.a.createElement("h1",null,this.props.title),this.props.content))}}]),t}(c.Component),m=a(25),v=a(23),f=a.n(v),g=a(17),y=a.n(g),b=a(24),E=a.n(b),C=function(){function e(t,a){var i=this;Object(n.a)(this,e),this.map=null,y.a.accessToken="pk.eyJ1Ijoibm9yYWhhbWEiLCJhIjoiY2ptaGFsZDR5MThrczN1dDhtajc1cTFmMSJ9.VEUImGmfsM77LfjErYxDdQ",this.map=new y.a.Map({container:a,style:"mapbox://styles/mapbox/streets-v9",zoom:[3],center:[137.15,-40.5]});var l=E.a.parse(t,{Point:["latitude","longitude"]});this.map.on("load",(function(){console.log("on load..."),i.map.addLayer({id:"powerplants",type:"circle",source:{type:"geojson",data:l},paint:{"circle-radius":{property:"capacity",type:"exponential",base:.8,stops:[[{zoom:2,value:1},.2],[{zoom:2,value:2500},5],[{zoom:4.5,value:1},2],[{zoom:4.5,value:2500},21],[{zoom:8,value:1},4],[{zoom:8,value:2500},32],[{zoom:12,value:1},6],[{zoom:12,value:2500},37],[{zoom:15,value:1},8],[{zoom:15,value:2500},42]]},"circle-color":["match",["get","technology"],"Black Coal","#ced1cc","Battery (Discharging)","#4e80e5","Hydro","#ffc83e","Hydro,Pumps","#ffc83e","Pumps","#ffc83e","Biomass","#dd54b6","Oil","#a45edb","Brown Coal","#43cfef","Distillate,Hydro","#43cfef","Gas (CCGT)","#00a98e","Gas (OCGT)","#00a98e","Gas (Reciprocating)","#00a98e","Gas (Steam)","#00a98e","Gas (Waste Coal Mine)","#00a98e","Bioenergy (Biomass)","#A7B734","Distillate","#ea545c","Bioenergy (Biogas)","#cc9b7a","Solar (Utility)","#ffd300","Solar (Utility),Wind","#ffd300","Wind","#0000FF","#ccc"],"circle-opacity":.77},filter:["all",["==",["get","technology"],"Battery (Discharging)"]]})}))}return Object(i.a)(e,[{key:"setFilterType",value:function(e){if(this.map.isStyleLoaded()){var t=["all",["==",["get","technology"],e]];this.map.setFilter("powerplants",["all",t])}}}]),e}(),j=function(e){function t(){var e,a;Object(n.a)(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={alldata:[],sorteddata:[],activeId:0,panelHeight:700},a.panelChanged=!1,a.m_mapFunctions=null,a.componentDidMount=function(){var e=this;this.setState({panelHeight:window.innerHeight-130}),m.a(f.a).then((function(t){var a,n;e.setState({alldata:t});var i="Fitzlibutzli";for(console.log(t),a=0;a<t.length;a++)(n=t[a]).technology!==i?(e.allPanels.push({content:[],title:n.technology}),e.allPanels[e.allPanels.length-1].content.push(n),i=n.technology):e.allPanels[e.allPanels.length-1].content.push(n);console.log(e.allPanels),e.m_mapFunctions=new C(t,e.mapContainer),e.setState({sorteddata:e.allPanels})}))},a.allPanels=[],a.setActiveID=function(e){a.setState({activeId:e}),a.m_mapFunctions.setFilterType(a.state.sorteddata[e].title)},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"createPanelContent",value:function(e){for(var t=this.state.sorteddata[e].content,a=[],n=0;n<t.length;n++){var i=t[n];a.push(r.a.createElement(P,{key:n,name:i.facility,status:i.status,region:i.region,capacity:i.generatorcap,latitude:i.latitude,longitude:i.longitude}))}return a}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"navbar"},this.state.sorteddata.map((function(e,t){return r.a.createElement(D,{key:t,name:e.title})}))),r.a.createElement("div",{className:"MainContainer"},r.a.createElement("div",{className:"Panels",style:{height:this.state.panelHeight}},this.state.sorteddata.map((function(t,a){return r.a.createElement(d,{key:a,id:a,app:e,activeID:e.state.activeId,title:t.title,content:e.createPanelContent(a)})}))),r.a.createElement("div",{style:{height:this.state.panelHeight},ref:function(t){return e.mapContainer=t},className:"mapContainer"})))}}]),t}(c.Component),P=function(e){var t=e.name,a=e.status,n=e.region,i=e.capacity,l=e.latitude,o=e.longitude;return r.a.createElement("div",{className:"panelContentFragment"},r.a.createElement("h3",null,t),r.a.createElement("p",null," Status: ",a," "),r.a.createElement("p",null," Capacity: ",i),r.a.createElement("p",null,"Region: ",n),r.a.createElement("span",null,"Latitude/Longitude: ",l,"/",o))},D=function(e){var t=e.name;return r.a.createElement("a",{href:"#"+t}," ",t," ")};u.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.965bc1d5.chunk.js.map