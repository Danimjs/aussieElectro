(this["webpackJsonpscrollyteller-react"]=this["webpackJsonpscrollyteller-react"]||[]).push([[0],{202:function(t,e,o){t.exports=o(435)},207:function(t,e,o){},208:function(t,e,o){},234:function(t,e){},28:function(t){t.exports=JSON.parse('{"sections":[{"year":1960,"paragraphs":[{"text":"This is a scrollyteller developed in React. Data is displayed on the map to the right as the user scrolls. The content on this lefthand side is defined via json. For each paragraph text and map highlights, hyperlinks and other actions can be defined. Actions include the filtering of dots on the map, and this functionality will be extended."},{"text":"The longterm goal of this project is to make this usable for generic data and enable the user to create a scrollyteller with a map- by only providing the narrative, the data to be visualised on the map, and the actions that should happen as the user scrolls."},{"text":"Keep scrolling to the year 2008 to see some actions and highlighting implemented. As you keep scrolling, the dots on the map will change according to the year as well."}]},{"year":1970,"paragraphs":[{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"}]},{"year":1980,"paragraphs":[{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"}]},{"year":1990,"paragraphs":[{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"}]},{"year":2000,"paragraphs":[{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"}]},{"year":2010,"paragraphs":[{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"}]},{"year":2020,"paragraphs":[{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"}]},{"year":2030,"paragraphs":[{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"}]},{"year":2040,"paragraphs":[{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"}]},{"year":2050,"paragraphs":[{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"},{"text":"Status: this will be proper content at some point. this will be proper content at some point. this will be proper content at some point .this will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some pointthis will be proper content at some point"}]}]}')},39:function(t){t.exports=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"capacity":160,"site":"Anglesea","state":"VIC","type":"Coal","type2":"Brown Coal","yearOpen":1960,"yearStart":1960,"yearEnd":2015},"geometry":{"type":"Point","coordinates":[144.180589,-38.389031]}},{"type":"Feature","properties":{"capacity":2720,"site":"Bayswater","state":"NSW","type":"Coal","type2":"Brown Coal","yearOpen":1969,"yearStart":1969,"yearEnd":2028},"geometry":{"type":"Point","coordinates":[150.953963,-32.39350179]}},{"type":"Feature","properties":{"capacity":700,"site":"Callide B","state":"QLD","type":"Coal","type2":"Brown Coal","yearOpen":1968,"yearStart":1968,"yearEnd":2034},"geometry":{"type":"Point","coordinates":[150.6263216,-24.33316877]}},{"type":"Feature","properties":{"capacity":900,"site":"Callide Power Plant","state":"QLD","type":"Coal","type2":"Brown Coal","yearOpen":1968,"yearStart":1968,"yearEnd":2046},"geometry":{"type":"Point","coordinates":[150.608611,-24.347222]}},{"type":"Feature","properties":{"capacity":158,"site":"Energy Brix Complex","state":"VIC","type":"Coal","type2":"Brown Coal","yearOpen":1960,"yearStart":1960,"yearEnd":2014},"geometry":{"type":"Point","coordinates":[146.413611,-38.254444]}},{"type":"Feature","properties":{"capacity":2880,"site":"Eraring","state":"NSW","type":"Coal","type2":"Brown Coal","yearOpen":1985,"yearStart":1985,"yearEnd":2028},"geometry":{"type":"Point","coordinates":[151.5246123,-33.06154805]}},{"type":"Feature","properties":{"capacity":1680,"site":"Gladstone","state":"QLD","type":"Coal","type2":"Brown Coal","yearOpen":1960,"yearStart":1960,"yearEnd":2025},"geometry":{"type":"Point","coordinates":[151.2207867,-23.84874103]}},{"type":"Feature","properties":{"capacity":1600,"site":"Hazelwood","state":"VIC","type":"Coal","type2":"Black Coal","yearOpen":1978,"yearStart":1978,"yearEnd":2017},"geometry":{"type":"Point","coordinates":[146.3897942,-38.27057505]}},{"type":"Feature","properties":{"capacity":724,"site":"Kogan Creek","state":"QLD","type":"Coal","type2":"Black Coal","yearOpen":1972,"yearStart":1972,"yearEnd":2052},"geometry":{"type":"Point","coordinates":[150.7489475,-26.915285]}},{"type":"Feature","properties":{"capacity":2080,"site":"Liddell","state":"NSW","type":"Coal","type2":"Black Coal","yearOpen":1978,"yearStart":1978,"yearEnd":2022},"geometry":{"type":"Point","coordinates":[150.9801122,-32.36902679]}},{"type":"Feature","properties":{"capacity":2190,"site":"Loy Yang A","state":"VIC","type":"Coal","type2":"Brown Coal","yearOpen":1968,"yearStart":1968,"yearEnd":2040},"geometry":{"type":"Point","coordinates":[146.5763613,-38.2506223]}},{"type":"Feature","properties":{"capacity":965,"site":"Loy Yang B","state":"VIC","type":"Coal","type2":"Brown Coal","yearOpen":1968,"yearStart":1968,"yearEnd":2040},"geometry":{"type":"Point","coordinates":[146.5855932,-38.25361918]}},{"type":"Feature","properties":{"capacity":856,"site":"Millmerran","state":"QLD","type":"Coal","type2":"Brown Coal","yearOpen":1968,"yearStart":1968,"yearEnd":2047},"geometry":{"type":"Point","coordinates":[151.2809098,-27.96165701]}},{"type":"Feature","properties":{"capacity":1340,"site":"Mt Piper","state":"NSW","type":"Coal","type2":"Brown Coal","yearOpen":1968,"yearStart":1968,"yearEnd":2038},"geometry":{"type":"Point","coordinates":[150.0356981,-33.36071511]}},{"type":"Feature","properties":{"capacity":600,"site":"Munmorah","state":"NSW","type":"Coal","type2":"Black Coal","yearOpen":1969,"yearStart":1969,"yearEnd":2012},"geometry":{"type":"Point","coordinates":[151.542161,-33.211781]}},{"type":"Feature","properties":{"capacity":546,"site":"Northern","state":"SA","type":"Coal","type2":"Brown Coal","yearOpen":1960,"yearStart":1960,"yearEnd":2016},"geometry":{"type":"Point","coordinates":[137.7874,-32.5429]}},{"type":"Feature","properties":{"capacity":240,"site":"Playford","state":"SA","type":"Coal","type2":"Black Coal","yearOpen":1969,"yearStart":1969,"yearEnd":2012},"geometry":{"type":"Point","coordinates":[137.781822,-32.538886]}},{"type":"Feature","properties":{"capacity":145,"site":"Redbank","state":"NSW","type":"Coal","type2":"Brown Coal","yearOpen":1968,"yearStart":1968,"yearEnd":2046},"geometry":{"type":"Point","coordinates":[151.072,-32.58]}},{"type":"Feature","properties":{"capacity":1460,"site":"Stanwell","state":"QLD","type":"Coal","type2":"Brown Coal","yearOpen":1968,"yearStart":1968,"yearEnd":2040},"geometry":{"type":"Point","coordinates":[150.3178837,-23.50750115]}},{"type":"Feature","properties":{"capacity":1400,"site":"Tarong","state":"QLD","type":"Coal","type2":"Brown Coal","yearOpen":1985,"yearStart":1985,"yearEnd":2030},"geometry":{"type":"Point","coordinates":[151.9178376,-26.77439673]}},{"type":"Feature","properties":{"capacity":443,"site":"Tarong North","state":"QLD","type":"Coal","type2":"Black Coal","yearOpen":1972,"yearStart":1972,"yearEnd":2047},"geometry":{"type":"Point","coordinates":[151.9178376,-26.77439673]}},{"type":"Feature","properties":{"capacity":1320,"site":"Vales Point B","state":"NSW","type":"Coal","type2":"Brown Coal","yearOpen":1960,"yearStart":1960,"yearEnd":2023},"geometry":{"type":"Point","coordinates":[151.5441155,-33.164639]}},{"type":"Feature","properties":{"capacity":1000,"site":"Wallerawang C","state":"NSW","type":"Coal","type2":"Brown Coal","yearOpen":1960,"yearStart":1960,"yearEnd":2013},"geometry":{"type":"Point","coordinates":[150.084444,-33.403889]}},{"type":"Feature","properties":{"capacity":1480,"site":"Yallourn","state":"VIC","type":"Coal","type2":"Brown Coal","yearOpen":1960,"yearStart":1960,"yearEnd":2025},"geometry":{"type":"Point","coordinates":[146.3475084,-38.17759622]}}]}')},435:function(t,e,o){"use strict";o.r(e);var i=o(11),n=o(12),a=o(15),p=o(13),r=o(14),s=o(0),l=o.n(s),c=o(10),h=o.n(c),m=(o(207),o(208),o(61)),y=o(93),b=o(163),w=o.n(b),d=function(t){function e(){var t,o;Object(i.a)(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(o=Object(a.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(r)))).m_actionFilter=null,o.state={visible:!0,id:o.props.id,anchorname:o.props.anchorname,paragraphs:[]},o.headerHandleChange=function(t){t.isIntersecting&&o.props.id!==o.props.activeID&&o.props.app.setActiveID(o.props.id),o.setState({visible:o.props.id===o.props.activeID})},o}return Object(r.a)(e,t),Object(n.a)(e,[{key:"componentDidMount",value:function(){for(var t=[],e=0;e<this.props.paragraphs.length;e++)t.push({text:this.props.paragraphs[e].props.content.text,filter:this.props.paragraphs[e].props.actionFilter}),this.setState({paragraphs:t})}},{key:"render",value:function(){var t=this;return l.a.createElement("section",{id:"section_"+this.state.id,className:"storyPanelSection ".concat(this.state.visible&&this.state.id===this.props.activeID?"activePanel":"inactivePanel")},l.a.createElement(y.a,{onChange:this.headerHandleChange,threshold:1},l.a.createElement("h1",{id:this.props.anchorname,className:"sticky sectiontitle"},this.props.title)),l.a.createElement("div",{id:this.props.anchorname+"_id",className:"panelcontent"},this.state.paragraphs.map((function(e,o){return l.a.createElement(u,{key:t.state.anchorname+"_id_p"+o,id:t.state.anchorname+"_id_p"+o,paragraph:e.text,actionFilter:e.filter})}))))}}]),e}(s.Component),u=function(t){function e(t){var o;return Object(i.a)(this,e),(o=Object(a.a)(this,Object(p.a)(e).call(this,t))).m_firedAction=!1,o.m_statusChanged=!1,o.m_filterArray=["any",[]],o.state={id:o.props.id,visible:!1},o.paragraphChange=function(t){o.setState({visible:t.isIntersecting})},o.handleScroll=o.handleScroll.bind(Object(m.a)(o)),o}return Object(r.a)(e,t),Object(n.a)(e,[{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(t){if(this.state.visible){var e=h.a.findDOMNode(this).getBoundingClientRect().top,o=h.a.findDOMNode(this).getBoundingClientRect().bottom;this.m_firedAction||(this.state.highlighted?(this.props.actionFilter&&this.props.actionFilter.action(this.props.actionFilter.objects,!0),this.m_firedAction=!0):this.props.actionFilter&&(this.props.actionFilter.action(null,!0),this.m_firedAction=!0)),e>150&&e<300||e<150&&e>0&&o>300?this.state.highlighted||(this.setState({highlighted:!0}),this.m_firedAction=!1):this.state.highlighted&&(this.setState({highlighted:!1}),this.m_firedAction=!1)}}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return l.a.createElement(y.a,{onChange:this.paragraphChange},l.a.createElement("p",{className:"scrolltext ".concat(this.state.highlighted?"active":""),id:this.props.id},w()(this.props.paragraph)))}}]),e}(s.Component),g=o(39),v=o(64),f=o.n(v),C=function(t){function e(){var t,o;Object(i.a)(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(o=Object(a.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(r)))).m_filterStartYear=["<=",["number",["get","yearStart"]],o.props.activeYear],o.m_filterEndYear=[">=",["number",["get","yearEnd"]],o.props.activeYear],o.m_filterType=["!=",["string",["get","type"]],"placeholder"],o.m_filterName=["!=",["string",["get","site"]],"placeholder"],o.m_initiated=!1,o.map=null,o.app=null,o.self=null,o.grump=null,o.m_colors={Coal:"#404040",Storage:"#4e80e5",Solar:"#ffc83e",Nuclear:"#dd54b6",Oil:"#a45edb",Hydro:"#43cfef","Wave & Tidal":"#43cfef",Wind:"#00a98e",Biomass:"#A7B734",Waste:"#ea545c",Gas:"#cc9b7a"},o.state={currentYear:o.props.activeYear,rawtypes:o.props.types},o.getFuel=function(t,e){return"-"===e?t:"Wind"===t||"Hydro"===t?e:t+", "+e},o.roundToOne=function(t){return+(Math.round(t+"e+1")+"e-1")},o}return Object(r.a)(e,t),Object(n.a)(e,[{key:"init",value:function(){var t=this;if(!this.m_initiated){f.a.accessToken="pk.eyJ1Ijoibm9yYWhhbWEiLCJhIjoiY2ptaGFsZDR5MThrczN1dDhtajc1cTFmMSJ9.VEUImGmfsM77LfjErYxDdQ",this.map=new f.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v9",zoom:[4],center:[140.7751,-38.2744]});var e=this.props.data;this.map.on("load",(function(){t.map.addLayer({id:"powerplants",type:"circle",source:{type:"geojson",data:e},paint:{"circle-radius":{property:"capacity",type:"exponential",base:5,stops:[[{zoom:2,value:1.5},1],[{zoom:2,value:2500},5],[{zoom:4.5,value:1.5},2],[{zoom:4.5,value:2500},21],[{zoom:8,value:1.5},4],[{zoom:8,value:2500},32],[{zoom:12,value:1.5},6],[{zoom:12,value:2500},37],[{zoom:15,value:1.5},8],[{zoom:15,value:2500},42]]},"circle-color":["match",["get","type"],"Coal","#404040","Storage","#4e80e5","Solar","#ffc83e","Nuclear","#dd54b6","Oil","#a45edb","Hydro","#43cfef","Wave & Tidal","#43cfef","Wind","#00a98e","Biomass","#A7B734","Waste","#ea545c","Gas","#cc9b7a","#ccc"],"circle-opacity":.3,"circle-stroke-color":["match",["get","type"],"Coal","#404040","Storage","#4e80e5","Solar","#ffc83e","Nuclear","#dd54b6","Oil","#a45edb","Hydro","#43cfef","Wave & Tidal","#43cfef","Wind","#00a98e","Biomass","#A7B734","Waste","#ea545c","Gas","#cc9b7a","#ccc"],"circle-stroke-opacity":1,"circle-stroke-width":.5}})}));var o=this,i=new f.a.Marker(this.tooltipContainer,{offset:[-140,0]}).setLngLat([0,0]).addTo(this.map);this.map.on("mouseenter","powerplants",(function(t){i.setLngLat(t.lngLat),o.grump=t.features[0],o.map.getCanvas().style.cursor="pointer",o.drawPopup(!0)})),this.map.on("mousemove","powerplants",(function(t){i.setLngLat(t.lngLat),o.grump=t.features[0],o.map.getCanvas().style.cursor="pointer",o.drawPopup(!0)})),this.map.on("mouseleave","powerplants",(function(t){o.map.getCanvas().style.cursor="",o.drawPopup(!1)})),this.map.getCanvas().style.cursor="pointer",this.m_initiated=!0}}},{key:"setTooltip",value:function(t,e,o,i,n,a,p){t?h.a.render(l.a.createElement(S,{color:e,name:o,capacity:i,open:n,decom:a,type2:p}),this.tooltipContainer):h.a.unmountComponentAtNode(this.tooltipContainer)}},{key:"componentDidUpdate",value:function(t){if(this.props.activeYear!==this.state.currentYear&&(this.setState({currentYear:this.props.activeYear}),this.m_filterStartYear=["<=",["number",["get","yearStart"]],this.props.activeYear],this.m_filterEndYear=[">=",["number",["get","yearEnd"]],this.props.activeYear],this.updateFilters()),this.props.types!==this.state.rawtypes){this.m_filterType=["any"];for(var e=0;e<this.props.types.length;e++)this.props.types[e].active&&this.m_filterType.push(["==",["get","type"],this.props.types[e].type]);this.setState({rawtypes:this.props.types}),this.updateFilters()}this.init()}},{key:"componentDidMount",value:function(){this.tooltipContainer=document.createElement("div"),this.init()}},{key:"drawPopup",value:function(t){var e=this.grump,o=e.properties.site,i=e.properties.capacity,n=e.properties.yearOpen,a=e.properties.yearEnd,p=this.m_colors[e.properties.type],r=e.properties.type2;this.setTooltip(t,p,o,i,n,a,r)}},{key:"setFilterType",value:function(t){this.map.isStyleLoaded()&&(this.m_filterType=["all",["==",["get","type"],t]],this.updateFilters())}},{key:"setFilterName",value:function(t){this.map.isStyleLoaded()&&(this.m_filterName="all"!==t?["all",["!=",["get","site"],t]]:null,this.updateFilters())}},{key:"updateFilters",value:function(){this.map.isStyleLoaded()&&this.map.setFilter("powerplants",["all",this.m_filterStartYear,this.m_filterEndYear,this.m_filterType,this.m_filterName])}},{key:"render",value:function(){var t=this;return l.a.createElement("div",{style:{height:this.props.height},ref:function(e){return t.mapContainer=e},className:"mapContainer topDistance",id:"map"})}}]),e}(s.Component),S=function(t){var e=t.color,o=t.name,i=t.capacity,n=t.open,a=t.decom,p=t.type2;return l.a.createElement("div",{className:"colour-key popupDiv"},l.a.createElement("h3",{className:"popupHeading",style:{color:e}}," ",o),l.a.createElement("div",{className:"popupInfo",style:{backgroundColor:e}},l.a.createElement("p",null,l.a.createElement("span",{className:"label-title"},"Capacity: "),i,l.a.createElement("span",{className:"units"},"MW")),""!=p?l.a.createElement("p",null,l.a.createElement("span",{className:"label-title"},"Type: "),p):"",l.a.createElement("p",null,l.a.createElement("span",{className:"label-title"},"Year opened: ")," ",n," "),l.a.createElement("p",null,l.a.createElement("span",{className:"label-title"}," Decomission: ")," ",a," ")))},E=o(28),k=o(164),O=o.n(k),x=o(16),N=function(t){function e(){return Object(i.a)(this,e),Object(a.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(r.a)(e,t),Object(n.a)(e,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(x.b,{width:this.props.width+20,height:this.props.height,data:this.props.percentages,reverseStackOrder:!0},l.a.createElement(x.a,{dataKey:"Coal",stackId:"a",fill:"#ced1cc"}),l.a.createElement(x.a,{dataKey:"Gas",stackId:"a",fill:"#cc9b7a"}),l.a.createElement(x.a,{dataKey:"Hydro",stackId:"a",fill:"#43cfef"}),l.a.createElement(x.a,{dataKey:"Oil",stackId:"a",fill:"#a45edb"}),l.a.createElement(x.a,{dataKey:"Nuclear",stackId:"a",fill:"#dd54b6"}),l.a.createElement(x.a,{dataKey:"Wind",stackId:"a",fill:"#00a98e"}),l.a.createElement(x.a,{dataKey:"Solar",stackId:"a",fill:"#ffc83e"}),l.a.createElement(x.a,{dataKey:"Biomass",stackId:"a",fill:"#A7B734"}),l.a.createElement(x.c,{layout:"vertical",align:"left",verticalAlign:"middle",iconType:"rect"})))}}]),e}(s.PureComponent);N.jsfiddleUrl="https://jsfiddle.net/alidingling/90v76x08/";var F=function(t){function e(){var t,o;Object(i.a)(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(o=Object(a.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(r)))).updateDimensions=function(){o.setState({width:window.innerWidth,height:window.innerHeight,panelHeight:window.innerHeight-100})},o.state={percentageCalcs:{},sections:[],width:0,height:0,activeId:0,panelHeight:800,types:[{type:"Coal",active:!0}],percentages:[{type:"Coal",percentage:45},{type:"Gas",percentage:10},{type:"Oil",percentage:10},{type:"Nuclear",percentage:15},{type:"Hydro",percentage:8},{type:"Wind",percentage:6},{type:"Waste",percentage:3},{type:"Solar",percentage:3}]},o.panelChanged=!1,o.updatePercentages=function(){var t=o.state.sections[o.state.activeId].year,e=[],i=o.state.percentageCalcs[t];for(var n in i){var a={type:n,percentage:i[n],name:n};e.push(a)}a={};for(var p=0;p<e.length;p++)a[e[p].type]=e[p].percentage;var r=[];r.push(a),o.setState({percentages:r})},o.UNSAFE_componentWillMount=function(){window.addEventListener("resize",this.updateDimensions),this.updateDimensions();for(var t=0;t<E.sections.length;t++)E.sections[t].renderparagraphs=this.createPanelContent(E.sections[t].year,E.sections[t].paragraphs);this.setState({sections:E.sections});for(var e={},o={},i=0;i<g.features.length;i++)for(var n=g.features[i],a=g.features[i].properties.yearStart,p=g.features[i].properties.yearEnd,r=a;r<=p;r++)o[r]?(o[r][n.properties.type]?o[r][n.properties.type]+=n.properties.capacity:o[r][n.properties.type]=n.properties.capacity,e[r]+=n.properties.capacity):(o[r]={},o[r][n.properties.type]=n.properties.capacity,e[r]=n.properties.capacity);for(var s in e)for(var l in o[s]){var c=o[s][l];c=c/e[s]*100,o[s][l]=c}this.setState({percentageCalcs:o});var h=[],m=o[E.sections[0].year];for(var s in m){n={type:s,percentage:m[s],name:s};h.push(n)}n={};for(t=0;t<h.length;t++)n[h[t].type]=h[t].percentage;var y=[];y.push(n),this.setState({percentages:y})},o.allPanels=[],o.setActiveID=function(t){o.setState({activeId:t}),o.updatePercentages()},o.setActiveMulti=function(t){var e=null;if(null===t)e=[{type:"Coal",active:!0}];else{e=[{type:"Coal",active:!1},{type:"Gas",active:!1},{type:"Oil",active:!1},{type:"Nuclear",active:!1},{type:"Hydro",active:!1},{type:"Wind",active:!1},{type:"Waste",active:!1},{type:"Solar",active:!1}];for(var i=0;i<e.length;i++)for(var n=0;n<t.length;n++)if(e[i].type===t[n]){e[i].active=!0;break}}o.setState({types:e})},o.setActive=function(t,e){o.setState((function(o){return{types:o.types.map((function(o,i){return o===t?{type:o.type,active:e}:o}))}}))},o.setActiveName=function(t){},o.toggleActive=function(t){console.log(t),o.setState((function(e){return{types:e.types.map((function(e){return e.type===t?{type:e.type,active:!e.active}:e}))}}))},o}return Object(r.a)(e,t),Object(n.a)(e,[{key:"componentDidUpdate",value:function(t){t.activeId!==this.state.activeId&&void 0!==t.activeId&&this.updatePercentages()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"createPanelContent",value:function(t,e){for(var o=[],i="",n="",a=0;a<e.length;a++){if(n=t+"_"+a,e[a].features)for(var p=0;p<e[a].features.length;p++){var r=e[a].features[p];"link"===r.type&&(e[a].text=e[a].text.replace(r.text,'<a href="'+r.url+'" target="_blank">'+r.text+"</a>"))}if(e[a].actions)for(p=0;p<e[a].actions.length;p++){var s=e[a].actions[p];if(s.highlight){"type"===s.highlight.type?i={action:this.setActiveMulti,objects:[]}:"plant"===s.highlight.type&&(i={action:this.setActiveName,objects:[]});for(var c=0;c<s.highlight.keywords.length;c++)e[a].text=e[a].text.replace(s.highlight.keywords[c],"<span class='"+s.highlight.keywords[c]+"'>"+s.highlight.keywords[c]+"</span>"),i.objects.push(this.cap(s.highlight.keywords[c]))}}o.push(l.a.createElement("div",{content:e[a],id:n,actionFilter:i}))}return o}},{key:"cap",value:function(t){return t.replace(/^\w/,(function(t){return t.toUpperCase()}))}},{key:"render",value:function(){var t=this;return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"navbar",id:"yearNav"},this.state.sections.map((function(e,o){return l.a.createElement(P,{key:o,id:o,name:e.year,activeId:t.state.activeId})}))),l.a.createElement("div",{className:"navbar",id:"typeNav"},this.state.types.map((function(e,o){return l.a.createElement(j,{key:o,onClickA:t.toggleActive,type:e.type,active:e.active})}))),l.a.createElement("div",{className:"MainContainer"},l.a.createElement("div",{className:"Panels topDistance",style:{height:this.state.panelHeight}},this.state.sections.map((function(e,o){return l.a.createElement(d,{key:o,id:o,app:t,activeID:t.state.activeId,title:e.year,anchorname:"section"+e.year,paragraphs:e.renderparagraphs})}))),l.a.createElement(C,{types:this.state.types,data:g,height:this.state.panelHeight,activeYear:void 0!==this.state.sections?this.state.sections[this.state.activeId].year:"2004"})))}}]),e}(s.Component),j=function(t){function e(){var t,o;Object(i.a)(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(o=Object(a.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(r)))).handleClick=function(){o.props.onClickA(o.props.type)},o}return Object(r.a)(e,t),Object(n.a)(e,[{key:"render",value:function(){return l.a.createElement("div",{onClick:this.handleClick,className:"navItem ".concat(this.props.active?"navItemActive":"")}," ",this.props.type," ")}}]),e}(s.Component),P=(s.Component,function(t){var e=t.id,o=t.name,i=t.activeId;return l.a.createElement(O.a,{selector:"#section".concat(o),alignToTop:!0},l.a.createElement("div",{className:"navItem ".concat(e===i?"navItemActive":"")}," ",o," "))});h.a.render(l.a.createElement(F,null),document.getElementById("root"))}},[[202,1,2]]]);
//# sourceMappingURL=main.87518912.chunk.js.map